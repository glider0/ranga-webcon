<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<title>NSWA Ranga</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="referrer" content="no-referrer">

	<link href="styles/main.css?v=__RELVERSION__" rel="stylesheet">
	<link href="styles/dialog.css?v=__RELVERSION__" rel="stylesheet">
	<link href="styles/fonts.css?v=__RELVERSION__" rel="stylesheet">
	<link href="styles/chrome_scroll.css?v=__RELVERSION__" rel="stylesheet">
	<style type="text/css">
		@font-face {
			font-family: "icon";
			src: url('font.woff?v=__RELVERSION__') format('woff');
			font-display: block;
		}

		* {
			box-sizing: border-box;
		}

		body {
			margin: 0;
			background-color: #f4f4f4;
			font-family: sans-serif;

			height: 100vh;
			min-height: 100vh;
			max-height: 100vh;
			display: flex;
			flex-flow: column;
			align-items: center;
			justify-content: center;
		}

		#main {
			background-color: white;
			width: calc(100vw - 140px);
			height: calc(100vh - 80px);
			max-width: 1200px;

			display: flex;
			flex-flow: row;
			align-items: stretch;
		}

		#nav_logo {
			display: flex;
			flex-flow: row;
			justify-content: center;
			margin: 28px 0;
		}

		#logo {

			width: 280px;
			height: 65px;
			fill: var(--theme-color)
		}

		#nav {
			background-color: #fafafa;
			width: 280px;
			overflow-y: auto;
			flex-shrink: 0;
		}

		#nav .navItem {
			width: 100%;
			justify-content: flex-start;
			padding: 8px 32px;

			overflow: hidden;
			overflow: -moz-hidden-unscrollable;
		}

		.navItem i {
			margin-right: 10px;
			font-size: 1.3em;
		}

		input[type="radio"] {
			display: none;
		}

		input[type="radio"]:not(:checked)+label {
			color: black;
			font-weight: normal;
		}

		h1 {
			border-bottom: 1px solid #dedede;
			font-size: 1.24em;
		}

		h2 {
			font-size: 1.12em;
			margin: 12px 0;
		}

		#wrapper {
			flex-grow: 1;
			display: flex;
			flex-flow: column;
			align-items: stretch;
			overflow-x: auto;
		}

		#bar {
			flex-shrink: 0;
			padding: 5px;
			display: flex;
			flex-flow: row;
			border-bottom: 1px solid #dedede;
		}

		#webcon_buttons {
			display: flex;
			flex-flow: row;
		}

		#webcon_title {
			flex-grow: 1;
			margin-left: 10px;
			font-size: 1.12em;

			display: flex;
			flex-flow: row;
			align-items: center;
		}

		#webcon_title * {
			display: inline-block;
			flex-grow: 0;
		}

		#scroll_area {
			overflow-y: auto;
			flex-grow: 1;
			display: flex;
			flex-flow: column;
			align-items: stretch;
			-webkit-overflow-scrolling: touch;
		}

		#webcon_notify:not(:empty) {
			padding: 6px;
			border-bottom: 1px solid #dedede;
		}

		#webcon_content {
			padding: 14px;
			flex-grow: 1;
		}

		button i {
			margin-right: 8px;
		}

		#menu {
			display: none;
			padding: 6px;
			font-size: 1.4em;
		}

		@media (max-width: 750px) {
			#main {
				width: 100vw;
				max-width: 100vw;
				height: 100vh;
				box-shadow: none;
				border: 0;
				border-radius: 0;
			}

			.nav_show {
				display: block !important;
			}

			#nav {
				background-color: white;
				box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.37);
				display: none;
				position: fixed;
				top: 0;
				bottom: 0;
				left: 0;
				width: 100vw;
				max-width: 320px;
				z-index: 100;
			}

			#bar {
				box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.37);
			}

			button i {
				margin-right: 0;
			}

			button span {
				display: none;
			}

			#menu {
				display: inline-block;
			}
		}

	</style>
</head>

<body>
	<div id="main" class="card">
		<div id="nav">
			<div id="nav_logo">
				<svg id="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 153.97 61.898">
					<g font-family="sans-serif" letter-spacing="0" word-spacing="0">
						<g stroke-width=".2646" font-size="10.583">
							<g style="line-height:125%" stroke="#000" font-size="17.639" paint-order="fill markers stroke">
								<path d="M106.158 13.3088h1.5523v-6.791c0-1.3583-.1235-2.7341-.194-4.0394h.0706l1.3935 2.6635 4.7096 8.1669h1.6757V.3794h-1.5523v6.7204c0 1.3406.1235 2.787.2117 4.0923h-.0882l-1.3758-2.6635-4.7097-8.1492h-1.6933zM122.5034 13.538c2.6987 0 4.392-1.6227 4.392-3.6689 0-1.9226-1.1641-2.8046-2.6634-3.4572l-1.8521-.7937c-1.0054-.4234-2.1343-.8996-2.1343-2.152 0-1.1642.9525-1.905 2.4165-1.905 1.1995 0 2.152.4762 2.9457 1.217l.8643-1.0406c-.9172-.9525-2.2754-1.6052-3.81-1.6052-2.346 0-4.0746 1.4464-4.0746 3.4396 0 1.8874 1.4288 2.8046 2.6282 3.3162l1.8698.8114c1.217.5468 2.152.9701 2.152 2.293 0 1.27-1.0231 2.1167-2.7165 2.1167-1.3406 0-2.6458-.635-3.5807-1.6051l-.9702 1.1112c1.129 1.1818 2.6988 1.9227 4.5333 1.9227zM130.8758 13.3088h1.9403l1.9227-7.7965c.2116-1.023.441-1.958.6526-2.9457h.0706c.2117.9878.4057 1.9227.635 2.9457l1.958 7.7965h1.9579L142.694.3794h-1.5699l-1.3582 7.038a974.4318 974.4318 0 0 0-.7408 4.1804h-.0882c-.2999-1.4111-.5997-2.8046-.9172-4.1805l-1.8168-7.038h-1.4817l-1.7816 7.038c-.3175 1.3935-.635 2.787-.9348 4.1805h-.0706c-.247-1.3935-.5116-2.787-.7585-4.1805l-1.3582-7.038h-1.6934zM146.5552 8.0523l.635-1.9755c.4587-1.464.882-2.8576 1.2877-4.3745h.0705c.4233 1.4993.829 2.9104 1.3053 4.3745l.6174 1.9755zm5.5563 5.2565h1.7286L149.4481.3794h-1.8169l-4.392 12.9294h1.658l1.2523-3.9512h4.7273z" paint-order="fill markers stroke" />
							</g>
							<g style="line-height:125%" font-size="50.8">
								<path d="M16.8845 13.1443h6.2484c5.842 0 9.0424 1.7272 9.0424 6.6548 0 4.826-3.2004 7.1628-9.0424 7.1628h-6.2484zm21.082 33.4264l-9.5504-16.3068c5.08-1.2192 8.4328-4.6736 8.4328-10.4648 0-7.7724-5.4356-10.4648-13.0048-10.4648h-11.684v37.2364h4.7244V30.7719h6.7056l9.0424 15.7988zM50.1514 47.231c3.4036 0 6.5024-1.778 9.144-3.9623h.1524l.4064 3.302h3.81V29.6035c0-6.8072-2.8448-11.3284-9.5504-11.3284-4.4196 0-8.3312 1.9812-10.8712 3.6068l1.8288 3.2004c2.1844-1.4732 5.08-2.9464 8.2804-2.9464 4.5212 0 5.6896 3.4036 5.6896 6.9596-11.7348 1.3208-16.9672 4.318-16.9672 10.3124 0 4.9784 3.4544 7.8232 8.0772 7.8232zm1.3208-3.7083c-2.7432 0-4.8768-1.27-4.8768-4.4196 0-3.556 3.1496-5.842 12.446-6.9596v7.7216c-2.6924 2.3876-4.8768 3.6576-7.5692 3.6576zM72.4756 46.5707h4.6228V26.5555c2.794-2.794 4.7244-4.2164 7.5692-4.2164 3.6576 0 5.2324 2.1844 5.2324 7.366v16.8656h4.6228V29.0955c0-7.0612-2.6416-10.8204-8.4328-10.8204-3.7592 0-6.604 2.0828-9.2456 4.6736h-.1524l-.4064-3.9624h-3.81zM112.8275 59.2707c8.5344 0 13.9192-4.4196 13.9192-9.5504 0-4.5212-3.2004-6.5532-9.6012-6.5532h-5.3848c-3.7084 0-4.826-1.2192-4.826-2.9972 0-1.524.762-2.4384 1.778-3.302 1.2192.6096 2.7432.9652 4.1148.9652 5.588 0 10.0584-3.7084 10.0584-9.6012 0-2.3876-.9144-4.4196-2.2352-5.6896h5.6388v-3.556h-9.6012c-.9652-.3556-2.3368-.7112-3.8608-.7112-5.588 0-10.3632 3.81-10.3632 9.8552 0 3.302 1.778 5.9436 3.6068 7.4168v.2032c-1.4224 1.016-3.0988 2.8448-3.0988 5.1308 0 2.1844 1.0668 3.6576 2.54 4.5212v.2032c-2.5908 1.6764-4.1148 3.9116-4.1148 6.2484 0 4.7752 4.6736 7.4168 11.43 7.4168zm0-24.5872c-3.2004 0-5.8928-2.54-5.8928-6.5532 0-4.064 2.6416-6.4516 5.8928-6.4516 3.2512 0 5.842 2.4384 5.842 6.4516 0 4.0132-2.6924 6.5532-5.842 6.5532zm.6604 21.4376c-5.0292 0-8.0264-1.9304-8.0264-4.8768 0-1.6256.8636-3.2512 2.8448-4.6736 1.2192.3048 2.54.4572 3.556.4572h4.7752c3.6576 0 5.6388.8636 5.6388 3.4036 0 2.8956-3.5052 5.6896-8.7884 5.6896zM137.563 47.231c3.4037 0 6.5025-1.778 9.144-3.9623h.1525l.4064 3.302h3.81V29.6035c0-6.8072-2.8448-11.3284-9.5504-11.3284-4.4196 0-8.3312 1.9812-10.8712 3.6068l1.8288 3.2004c2.1844-1.4732 5.08-2.9464 8.2804-2.9464 4.5212 0 5.6896 3.4036 5.6896 6.9596-11.7348 1.3208-16.9672 4.318-16.9672 10.3124 0 4.9784 3.4544 7.8232 8.0772 7.8232zm1.3209-3.7083c-2.7432 0-4.8768-1.27-4.8768-4.4196 0-3.556 3.1496-5.842 12.446-6.9596v7.7216c-2.6924 2.3876-4.8768 3.6576-7.5692 3.6576z" />
							</g>
							<g style="line-height:125%">
								<path d="M2.3496 59.4218h.9842V52.49h2.3494v-.8255H.0002v.8255h2.3494zM6.9914 59.4218h.963v-4.1697c.5821-.582.9843-.8783 1.577-.8783.7619 0 1.09.455 1.09 1.5345v3.5135h.963v-3.6405c0-1.471-.5503-2.2542-1.7568-2.2542-.7831 0-1.3757.434-1.9049.963l.0318-1.1852v-2.3071h-.9631zM15.7374 59.5594c.7832 0 1.397-.2646 1.905-.5926l-.3493-.635c-.4233.2857-.8784.455-1.4393.455-1.09 0-1.8414-.783-1.9049-2.0107h3.8734a3.7592 3.7592 0 0 0 .0423-.5503c0-1.6404-.8255-2.6987-2.286-2.6987-1.3334 0-2.5928 1.1641-2.5928 3.0268 0 1.8943 1.2277 3.0055 2.7516 3.0055zm-1.799-3.4712c.1163-1.1324.836-1.7885 1.6509-1.7885.8995 0 1.4287.6244 1.4287 1.7885zM21.9105 56.5115l1.7673-2.6457c.2223-.381.434-.762.6244-1.143h.0423c-.0211.4022-.0635 1.0266-.0635 1.4075v2.3812zm4.3178 0h-1.0265v-4.847h-1.069l-3.2277 4.9846v.635h3.376v2.1377h.9207v-2.1377h1.0265zM29.347 59.5594c.3492 0 .7302-.1058 1.0583-.2116l-.1905-.7197c-.1905.0741-.455.1482-.6561.1482-.6668 0-.889-.4022-.889-1.1112v-3.2067h1.5557v-.7831h-1.5557v-1.6086h-.8043l-.1164 1.6086-.8996.0529v.7302h.8572v3.1855c0 1.1535.4128 1.9155 1.6404 1.9155zM31.5266 59.4218h.963v-4.1697c.5821-.582.9843-.8783 1.577-.8783.7619 0 1.09.455 1.09 1.5345v3.5135h.963v-3.6405c0-1.471-.5503-2.2542-1.7568-2.2542-.7831 0-1.3757.434-1.9049.963l.0318-1.1852v-2.3071h-.9631zM43.4646 59.5594c1.0477 0 1.9049-.381 2.4023-.8995v-3.2596h-2.54v.8149h1.6404v2.032c-.3069.2857-.8466.455-1.4075.455-1.6615 0-2.5823-1.2276-2.5823-3.1855 0-1.9367 1.016-3.1431 2.5717-3.1431.7937 0 1.2911.328 1.6827.7408l.5292-.635c-.4445-.4762-1.1536-.963-2.233-.963-2.0532 0-3.556 1.5239-3.556 4.032 0 2.5188 1.45 4.011 3.4925 4.011zM47.7131 59.4218h4.593v-.836h-3.6087V55.76h2.942v-.836h-2.942V52.49h3.4923v-.8255h-4.4766zM53.9348 59.4218h.9313v-4.0744c0-.8149-.0741-1.6404-.1164-2.4235h.0423l.836 1.598 2.8257 4.9h1.0054v-7.7574h-.9313v4.0321c0 .8043.074 1.6721.127 2.4553h-.053l-.8254-1.598-2.8257-4.8894h-1.016zM65.3778 59.5594c1.3546 0 2.0954-.7725 2.0954-1.7038 0-1.09-.9207-1.4287-1.7567-1.7462-.6456-.2434-1.27-.4445-1.27-.9948 0-.4445.328-.8255 1.0477-.8255.5186 0 .9207.2116 1.3229.508l.4657-.6244c-.4551-.3493-1.0795-.6456-1.7886-.6456-1.2488 0-1.979.7197-1.979 1.6298 0 .9736.9101 1.3652 1.7144 1.6615.635.2434 1.3123.508 1.3123 1.09 0 .4975-.3704.8996-1.1323.8996-.688 0-1.2065-.2751-1.7039-.6773l-.4762.635c.5503.455 1.3334.7937 2.1483.7937zM68.931 61.8983c1.143 0 1.7357-.8678 2.1378-2.0002l2.1695-6.2228h-.9419l-1.0265 3.196c-.1587.508-.328 1.09-.4868 1.6087h-.053c-.1798-.5186-.381-1.1113-.5503-1.6087l-1.1747-3.196h-1.0054l2.3071 5.7571-.127.434c-.2328.709-.6455 1.2381-1.3017 1.2381-.1481 0-.3175-.0529-.4339-.0952l-.1905.7726c.18.074.4022.1164.6774.1164zM75.8575 59.5594c1.3546 0 2.0954-.7725 2.0954-1.7038 0-1.09-.9207-1.4287-1.7568-1.7462-.6455-.2434-1.27-.4445-1.27-.9948 0-.4445.3281-.8255 1.0478-.8255.5185 0 .9207.2116 1.3229.508l.4656-.6244c-.455-.3493-1.0795-.6456-1.7885-.6456-1.2488 0-1.979.7197-1.979 1.6298 0 .9736.91 1.3652 1.7144 1.6615.635.2434 1.3123.508 1.3123 1.09 0 .4975-.3704.8996-1.1324.8996-.6879 0-1.2065-.2751-1.7039-.6773l-.4762.635c.5503.455 1.3335.7937 2.1484.7937zM80.8978 59.5594c.3492 0 .7302-.1058 1.0583-.2116l-.1905-.7197c-.1905.0741-.455.1482-.6562.1482-.6667 0-.889-.4022-.889-1.1112v-3.2067h1.5558v-.7831h-1.5557v-1.6086h-.8043l-.1164 1.6086-.8996.0529v.7302h.8572v3.1855c0 1.1535.4128 1.9155 1.6404 1.9155zM85.2297 59.5594c.7831 0 1.397-.2646 1.905-.5926l-.3493-.635c-.4233.2857-.8784.455-1.4393.455-1.09 0-1.8414-.783-1.905-2.0107h3.8734a3.7555 3.7555 0 0 0 .0424-.5503c0-1.6404-.8255-2.6987-2.286-2.6987-1.3334 0-2.5928 1.1641-2.5928 3.0268 0 1.8943 1.2276 3.0055 2.7516 3.0055zm-1.7991-3.4712c.1164-1.1324.836-1.7885 1.651-1.7885.8995 0 1.4286.6244 1.4286 1.7885zM88.7823 59.4218h.963v-4.1697c.5292-.5926 1.016-.8783 1.45-.8783.7301 0 1.0688.455 1.0688 1.5345v3.5135h.963v-4.1697c.5398-.5926 1.0054-.8783 1.45-.8783.7301 0 1.0688.455 1.0688 1.5345v3.5135h.963v-3.6405c0-1.471-.5608-2.2542-1.7461-2.2542-.6985 0-1.3018.455-1.8944 1.1006-.2328-.6773-.709-1.1006-1.5875-1.1006-.6878 0-1.291.434-1.7885.9842h-.0317l-.0847-.836h-.7937z" />
							</g>
						</g>
					</g>
				</svg>
			</div>
			<input type="radio" name="radio" id="radio-placeholder" style="display: none;">

			<input type="radio" name="radio" id="radio-network" checked>
			<label class="btnFlat navItem" for="radio-network" onclick="selectPage('network', '网络连接')"><i class="icon icon-network"></i>网络连接</label>

			<input type="radio" name="radio" id="radio-interface">
			<label class="btnFlat navItem" for="radio-interface" onclick="selectPage('interface', '接口配置')"><i class="icon icon-interface"></i>接口配置</label>

			<input type="radio" name="radio" id="radio-wifi">
			<label class="btnFlat navItem" for="radio-wifi" onclick="selectPage('wifi', '无线保真')"><i class="icon icon-wifi"></i>无线保真</label>

			<input type="radio" name="radio" id="radio-dns">
			<label class="btnFlat navItem" for="radio-dns" onclick="selectPage('dns', '域名系统和自动配置')"><i class="icon icon-dns"></i>域名系统和自动配置</label>

			<input type="radio" name="radio" id="radio-system">
			<label class="btnFlat navItem" for="radio-system" onclick="selectPage('system', '系统管理')"><i class="icon icon-system"></i>系统管理</label>

			<input type="radio" name="radio" id="radio-addon">
			<label class="btnFlat navItem" for="radio-addon" onclick="selectPage('addon', '附加组件')"><i class="icon icon-addon"></i>附加组件</label>

			<input type="radio" name="radio" id="radio-mwan">
			<label class="btnFlat navItem" for="radio-mwan" onclick="selectPage('mwan', '多宿主')"><i class="icon icon-mwan"></i>多宿主</label>

			<!--
			<input type="radio" name="radio" id="radio-ts">
			<label class="btnFlat navItem" for="radio-ts" onclick="selectPage('ts', '流量整形')"><i class="icon icon-ts"></i>流量整形</label>
-->

			<input type="radio" name="radio" id="radio-misc">
			<label class="btnFlat navItem" for="radio-misc" onclick="selectPage('misc', '杂项与微调')"><i class="icon icon-misc"></i>杂项与微调</label>

			<input type="radio" name="radio" id="radio-cron">
			<label class="btnFlat navItem" for="radio-cron" onclick="selectPage('cron', '计划任务')"><i class="icon icon-cron"></i>计划任务</label>

			<input type="radio" name="radio" id="radio-setting">
			<label class="btnFlat navItem" for="radio-setting" onclick="selectPage('setting', 'Web 控制台设置')"><i class="icon icon-setting"></i>Web 控制台设置</label>

			<input type="radio" name="radio" id="radio-update">
			<label class="btnFlat navItem" for="radio-update" onclick="selectPage('update', '软件更新')"><i class="icon icon-update"></i>软件更新</label>

			<input type="radio" name="radio" id="radio-info">
			<label class="btnFlat navItem" for="radio-info" onclick="selectPage('info', '关于 Ranga')"><i class="icon icon-info"></i>关于 Ranga</label>
		</div>
		<div id="wrapper">
			<div id="bar">
				<button id="menu" class="btnFlat"><i class="icon icon-menu"></i></button>
				<div id="webcon_title"></div>
				<div id="webcon_buttons"></div>
				<button class="btnFlat" id="cmdline"><i class="icon icon-terminal"></i><span>命令行工具</span></button>
				<button class="btnFlat" id="login"><i class="icon icon-user"></i><span>登录</span></button>
			</div>

			<div id="notify_t" class="hide notify">
				<div class="notify_main">
					<div class="notify_title"><i class="icon"></i><span class="notify_title_text"></span></div>
					<div class="notify_text tips"></div>
				</div>
				<div class="notify_btns">
				</div>
			</div>

			<div id="scroll_area">
				<div id="webcon_notify"></div>
				<div id="webcon_content"></div>
			</div>
		</div>
	</div>

	<script src="scripts/browsercheck.js?v=__RELVERSION__"></script>
	<script src="scripts/utils.js?v=__RELVERSION__"></script>
	<script src="scripts/ranga.js?v=__RELVERSION__"></script>
	<script src="scripts/webcon.js?v=__RELVERSION__"></script>
	<script src="scripts/dialog.js?v=__RELVERSION__"></script>
	<script>
		var webconThemeUUID = null;
		const defErrorHandler = proto => {
			utils.promiseDebug(proto);
			dialog.simple(utils.isNil(proto) ? "网络错误或 Web 控制台错误" : ranga.errstr(proto.code));
		}

		const defErrorHandlerPage = proto => {
			utils.promiseDebug(proto);
			let msg = (utils.isNil(proto) ? "网络错误或 Web 控制台错误" : ranga.errstr(proto.code));
			webcon.contentLoadData(msg, false);
			webcon.removeAllButtons();
		}

		const selectPage = (page, title) => {
			webcon.contentLoadData('', false);
			webcon.removeAllButtons();
			webcon.contentSetTitle('加载中');
			webcon.loadScript("js_" + page, "pages/" + page + ".js?v=__RELVERSION__").then(first => {
				return webcon.contentLoadUri("pages/" + page + ".html?v=__RELVERSION__", true);
			}).then(e => {
				webcon.contentSetTitle(title);
				//window['page_' + page + "_init"]();
				eval('page_' + page + "_init()")
			}).catch(e => {
				utils.promiseDebug(e);
				dialog.simple("加载页面过程中发生网络错误或 Web 控制台错误");
				webcon.contentSetTitle('加载失败');
			});
			setTimeout((() => document.getElementById('nav').classList.remove('nav_show')), 100);
		}

		const iframePage = (uri, title, showUri) => {
			document.getElementById('radio-placeholder').checked = true;
			webcon.contentLoadData('', false);
			webcon.removeAllButtons();
			webcon.contentSetTitle('加载中');
			webcon.loadScript("extra_js_iframe", "extra/iframe.js?v=__RELVERSION__").then(first => {
				return webcon.contentLoadUri("extra/iframe.html?v=__RELVERSION__", true);
			}).then(e => {
				webcon.contentSetTitle(title);
				window.extraIframeLoad(uri, showUri);
			}).catch(e => {
				utils.promiseDebug(e);
				dialog.simple("加载页面过程中发生网络错误或 Web 控制台错误");
				webcon.contentSetTitle('加载失败');
			});
			utils.delay(100).then(v => (document.getElementById('nav').classList.remove('nav_show')));
		}

		document.getElementById('menu').addEventListener('click', e => {
			document.getElementById('nav').classList.add('nav_show');
		});

		document.getElementById('cmdline').addEventListener('click', e => {
			window.open('https://glider0.github.io/doc.zh/euman.html', '_blank');
		});

		document.getElementById('login').addEventListener('click', e => {
			let d = dialog.show('icon-user', '登录', "请输入超级用户密码以完成登录<br><br><input style='width: 100%' type=password placeholder='置空将尝试默认密码 ranga'>", [{
				name: "登录",
				func: (d => {
					let passwd = d.getElementsByTagName('input')[0].value;
					if (passwd === '')
						passwd = 'ranga';
					ranga.api.auth(passwd).then(proto => {
						webcon.setToken(proto.payload);
						dialog.simple('您已经通过鉴权。切换为超级用户身份。Web 控制台上外观不会有变化，在执行特权操作时才能看出差异。关闭浏览器、重启 NSWA Ranga、另一终端重新登录时本次授权将会自动失效。', '好');
					}).catch(defErrorHandler);
					dialog.close(d);
				})
			}, {
				name: "取消",
				func: dialog.close
			}]);
			let ipt = dialog.textWidget(d).getElementsByTagName('input')[0];
			ipt.addEventListener('keyup', e => {
				e.preventDefault();
				if (e.keyCode === 13) {
					d.getElementsByTagName('button')[0].click();
				}
			});
			ipt.focus();
		});

		utils.idbGet('theme', 'custom-css').then(result => {
			if (!utils.isNil(result)) {
				if (result.theme_compat !== '1') {
					webcon.sendNotify('theme-not-compat', 'icon-warning', '当前使用的第三方主题与 Web 控制台不兼容', '请从第三方主题来源检查更新的版本，以获取和最新 Web 控制台兼容的主题。', 'info', true, []);
				} else {
					webconThemeUUID = (utils.isNil(result.theme_uuid) ? "UNKNOWN" : result.theme_uuid);
					let s = document.createElement("style");
					s.innerHTML = result.data;
					document.getElementsByTagName("head")[0].appendChild(s);
				}
			}
		});

		selectPage('network', '网络连接');

	</script>
</body>

</html>
